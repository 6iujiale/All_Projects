



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Cruzr Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>User management - Cruzr Developer documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#user-management" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Cruzr Developer documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cruzr Developer documentation
            </span>
            <span class="md-header-nav__topic">
              
                User management
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Cruzr Developer documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Cruzr Developer documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Update history" class="md-nav__link">
      Update history
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../openplatform.html" title="Cruzr open platform" class="md-nav__link">
      Cruzr open platform
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../productintroduction.html" title="Cruzr product introduction" class="md-nav__link">
      Cruzr product introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cruzrframe.html" title="Technical framework" class="md-nav__link">
      Technical framework
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      QuickStart
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        QuickStart
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../adbconnect.html" title="Preparatory work（environment）" class="md-nav__link">
      Preparatory work（environment）
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/tutorial/build your first app.html" title="Build your first app" class="md-nav__link">
      Build your first app
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Guidance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Guidance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/other/async.html" title="Promise Applications" class="md-nav__link">
      Promise Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/tutorial/create your first skill.html" title="Create your first skill" class="md-nav__link">
      Create your first skill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/skill.html" title="Skill" class="md-nav__link">
      Skill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/tutorial/overriding-speech-service.html" title="Overriding-speech-service" class="md-nav__link">
      Overriding-speech-service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Commonly used class
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Commonly used class
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/robot-context.html" title="Context" class="md-nav__link">
      Context
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/other/serialize.html" title="Serialization" class="md-nav__link">
      Serialization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      SDK documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        SDK documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/overview.html" title="System-service" class="md-nav__link">
      System-service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Speech
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Speech
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/speech.html" title="Speech service" class="md-nav__link">
      Speech service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="voice-assistant.html" title="Voice-assistant" class="md-nav__link">
      Voice-assistant
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/tutorial/recognize understand and distribute voice instructions.html" title="Recognize understand and distribute voice instructions" class="md-nav__link">
      Recognize understand and distribute voice instructions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      Locomotion
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        Locomotion
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/locomotion.html" title="Locomotion control service" class="md-nav__link">
      Locomotion control service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/navigation.html" title="Navigation service" class="md-nav__link">
      Navigation service
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4" type="checkbox" id="nav-7-4">
    
    <label class="md-nav__link" for="nav-7-4">
      Hardware
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-4">
        Hardware
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/sensor.html" title="Sensor service" class="md-nav__link">
      Sensor service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/servo.html" title="Servo service" class="md-nav__link">
      Servo service
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/power.html" title="Power service" class="md-nav__link">
      Power service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/recharging.html" title="Recharging service" class="md-nav__link">
      Recharging service
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        User management
      </label>
    
    <a href="user management.html" title="User management" class="md-nav__link md-nav__link--active">
      User management
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user-management" class="md-nav__link">
    User Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-user-information" class="md-nav__link">
    Get User Information
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-user-management-status" class="md-nav__link">
    Get User Management Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-decryption" class="md-nav__link">
    File Decryption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-registration" class="md-nav__link">
    User registration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-a-user-registers-a-user-through-this-interface-in-order-to-maintain-data-consistency-the-user-data-state-flow-is-consistent-with-the-state-of-user-management-when-user-management-is-enabled-for-online-user-management-all-users-registered-through-this-interface-are-online-users-on-the-contrary-offline-users-are-entered-and-you-can-query-the-status-through-the-above-interface-of-get-user-management-status" class="md-nav__link">
    When a user registers a user through this interface, in order to maintain data consistency, the user data state flow is consistent with the state of user management. When user management is enabled for online user management, all users registered through this interface are online users. On the contrary, offline users are entered, and you can query the status through the above interface of Get User Management Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="visual.html" title="Visual service" class="md-nav__link">
      Visual service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="leisure.html" title="Leisure service" class="md-nav__link">
      Leisure service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="multimedia.html" title="Multimedia service" class="md-nav__link">
      Multimedia service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11" type="checkbox" id="nav-7-11">
    
    <label class="md-nav__link" for="nav-7-11">
      Expression
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-11">
        Expression
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/emotion.html" title="Emotion service" class="md-nav__link">
      Emotion service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/motion.html" title="Motion control" class="md-nav__link">
      Motion control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/orchestration.html" title="Dance service" class="md-nav__link">
      Dance service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/light.html" title="Lighting services" class="md-nav__link">
      Lighting services
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/skillmanager.html" title="Skill manager" class="md-nav__link">
      Skill manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android/guide/system-service/diagnosis.html" title="Diagnosis service" class="md-nav__link">
      Diagnosis service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="setting.html" title="System settings" class="md-nav__link">
      System settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq.html" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../compatibility.html" title="Compatibility" class="md-nav__link">
      Compatibility
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user-management" class="md-nav__link">
    User Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-user-information" class="md-nav__link">
    Get User Information
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-user-management-status" class="md-nav__link">
    Get User Management Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-decryption" class="md-nav__link">
    File Decryption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-registration" class="md-nav__link">
    User registration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-a-user-registers-a-user-through-this-interface-in-order-to-maintain-data-consistency-the-user-data-state-flow-is-consistent-with-the-state-of-user-management-when-user-management-is-enabled-for-online-user-management-all-users-registered-through-this-interface-are-online-users-on-the-contrary-offline-users-are-entered-and-you-can-query-the-status-through-the-above-interface-of-get-user-management-status" class="md-nav__link">
    When a user registers a user through this interface, in order to maintain data consistency, the user data state flow is consistent with the state of user management. When user management is enabled for online user management, all users registered through this interface are online users. On the contrary, offline users are entered, and you can query the status through the above interface of Get User Management Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>User management</h1>
                
                <h3 id="user-management">User Management</h3>
<p>User management includes online user management and local user management. </p>
<p><strong>Online user data</strong> distinguishes different groups with enterprise number. Users in each group do not interfere with each other, and the groupID is the unique identification ID.</p>
<p><strong>Offline User Data</strong>  is stored in the robot body and can be used when online users are not turned on and there is no network.</p>
<p>It will actively obtain online or offline status when user management is started for the first time. Either online or offline must be selected, and the data is not interconnected. When you create an enterprise, online user management is enabled by default, and the groupID of the enterprise is generated. If you need to switch to offline user management, please contact the UBT technical support engineer. </p>
<p>Online user management and offline user management query user information method：</p>
<ul>
<li>In order to query the information of online users, it is necessary to provide face pictures or face feature values for face recognition through visual services. After recognition, the information of online users can be returned. For details, please refer to <a href="visual.html">visual services</a>face recognition interface .</li>
<li>To query the offline user information, you can call the following interfaces <code>getusers</code> and <code>getuserbyfaceid</code>  to return the user information. When <code>getuserbyfaceid</code>  is called to query single user information, faceID is required. The face recognition interface of  <a href="visual.html">visual services</a>must be called before querying information to get faceID,  then call the <code>getuserbyfaceid</code>   method to query individual user information.</li>
</ul>
<h4 id="initialization">Initialization</h4>
<ul>
<li>Before using user management accesses the agent object,please initialize the usermanager object as follows: </li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">UserManager</span> <span class="n">userManager</span><span class="o">=</span><span class="n">UserManager</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</pre></div>


<h4 id="get-user-information">Get User Information</h4>
<ul>
<li>Get all local users information :</li>
</ul>
<div class="codehilite"><pre><span></span>   <span class="n">userManager</span><span class="p">.</span><span class="na">getUsers</span><span class="p">(</span><span class="k">new</span> <span class="n">UserListenrAbstract</span><span class="cm">/*[1]*/</span><span class="p">(){</span>
       <span class="nd">@Override</span>
       <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getUsers</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="cm">/*[2]*/</span><span class="p">)</span> <span class="p">{</span>
       <span class="p">}</span>
    <span class="p">});</span>
</pre></div>


<p>[1] <code>Userlistenrabstract</code> is an abstract class that implements the <code>usermanagerlistener</code> interface. It implements callback listening by inheriting the <code>userlistenrabstract</code> class and overriding its method.</p>
<p>The interface call method of <code>UserManagerListenr</code>  is as follows：</p>
<div class="codehilite"><pre><span></span>   <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserManagerListenr</span> <span class="p">{</span>
      <span class="c1">//Get all local users information </span>
       <span class="kt">void</span> <span class="nf">getUsers</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="p">);</span>
       <span class="c1">//Get a local user information according to faceID </span>
       <span class="kt">void</span> <span class="nf">getUserByFaceId</span><span class="p">(</span><span class="n">User</span> <span class="n">user</span><span class="p">);</span>
       <span class="c1">//Query user management status  </span>
       <span class="kt">void</span> <span class="nf">getStatus</span><span class="p">(</span><span class="n">UserStatus</span> <span class="n">status</span><span class="p">);</span>
   <span class="p">}</span>
</pre></div>


<p><code>[2]</code> <code>Users</code> are the information collection of all local users queried. The user entity attributes are as follows:</p>
<div class="codehilite"><pre><span></span>   <span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="p">{</span>
       <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>   <span class="c1">//Userid</span>
       <span class="kd">private</span> <span class="n">String</span> <span class="n">uuid</span><span class="p">;</span>   <span class="c1">//User UUID</span>
       <span class="kd">private</span> <span class="n">String</span> <span class="n">faceId</span><span class="p">;</span>   <span class="c1">//user faceId，used to recognization</span>
       <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>   <span class="c1">//User name</span>
       <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>   <span class="c1">//Title</span>
       <span class="kd">private</span> <span class="kt">int</span> <span class="n">gender</span><span class="p">;</span>   <span class="c1">//User gender 0:female  1：male  2：secrecy</span>
       <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Face</span><span class="o">&gt;</span> <span class="n">faces</span><span class="p">;</span>  <span class="c1">//Face informaton [A person can have multiple face photos, and the corresponding information of each photo ]</span>
   <span class="p">}</span>
</pre></div>


<p>The properties of Face are as follows: </p>
<div class="codehilite"><pre><span></span>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Face</span> <span class="p">{</span>
       <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>   <span class="c1">//id</span>
       <span class="kd">private</span> <span class="n">String</span> <span class="n">faceId</span><span class="p">;</span>   <span class="c1">//User faceId</span>
       <span class="kd">private</span> <span class="n">String</span> <span class="n">path</span><span class="p">;</span>   <span class="c1">//Picture path</span>
   <span class="p">}</span>
</pre></div>


<p><font color="red">Note: the image path is a file encrypted by image, which can only be used after decryption. Please refer to the following <a><code>file decryption</code></a>method.</font ></p>
<ul>
<li>Query individual user information according to faceid: </li>
</ul>
<div class="codehilite"><pre><span></span> <span class="n">userManager</span><span class="p">.</span><span class="na">getUserByFaceId</span><span class="cm">/*[1]*/</span><span class="p">(</span><span class="n">mFaceId</span> <span class="p">,</span><span class="k">new</span> <span class="n">UserListenrAbstract</span><span class="p">(){</span>
       <span class="nd">@Override</span>
       <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getUserByFaceId</span><span class="p">(</span><span class="n">User</span> <span class="n">user</span><span class="cm">/*[2]*/</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">super</span><span class="p">.</span><span class="na">getUserByFaceId</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
         <span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">&quot;MainActivity&quot;</span><span class="p">,</span><span class="s">&quot;user:&quot;</span><span class="o">+</span><span class="n">user</span><span class="p">);</span>
       <span class="p">}</span>
  <span class="p">});</span>
</pre></div>


<p>[1]Parameter description of <code>getUserByFaceId(String mFaceId,UserManagerListenr listenr)</code>method  :</p>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="center">Type</th>
<th align="left">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">mFaceId</td>
<td align="center">String</td>
<td align="left">User faceId(Each user has only one faceid, which is generated by <a href="visual.html">visual services</a>） when adding user information. Therefore, when using this interface, you should first call the face recognition interface of <a href="visual.html">visual services</a> to get the faceid)</td>
</tr>
<tr>
<td align="left">listenr</td>
<td align="center">UserManagerListenr</td>
<td align="left">To callback listening，Please refer to <a>get all local user information</a> description.</td>
</tr>
</tbody>
</table>
<p>[2] Quering a local user information by the condition, for user entity property , please refer to: <a> get all local user information</a> entity description.</p>
<h4 id="get-user-management-status">Get User Management Status</h4>
<p>It is used  to query whether user management is online or offline. If it is online user management, the corresponding  <code>groupid</code> under the enterprise number of the robot will be returned. The <code>groupid</code> is used to distinguish the personnel information under different enterprise numbers. People in the user library of the same groupid are not allowed to be duplicate.User libraries of different groupids do not affect each other .</p>
<div class="codehilite"><pre><span></span>  <span class="n">userManager</span><span class="p">.</span><span class="na">getStatus</span><span class="p">(</span><span class="k">new</span> <span class="n">UserListenrAbstract</span><span class="p">(){</span>
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getStatus</span><span class="p">(</span><span class="n">UserStatus</span> <span class="n">status</span><span class="cm">/*[1]*/</span><span class="p">)</span> <span class="p">{</span>
     <span class="p">}</span>
  <span class="p">});</span>
</pre></div>


<p>[1]<code>Status</code> refers to the status of user management (online / offline) and  online groupid . The userstatus entity properties are as follows: </p>
<div class="codehilite"><pre><span></span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserStatus</span><span class="p">{</span>
     <span class="kd">private</span> <span class="n">Boolean</span> <span class="n">open</span><span class="p">;</span><span class="c1">//Whether online user management open  true:online user management open  false:online user management is not open</span>
     <span class="kd">private</span> <span class="n">String</span> <span class="n">groupId</span><span class="p">;</span>  <span class="c1">//return groupid when oline user management open,otherwise,return null</span>
 <span class="p">}</span>
</pre></div>


<h4 id="file-decryption">File Decryption</h4>
<div class="codehilite"><pre><span></span><span class="n">InputStream</span> <span class="n">inputStream</span> <span class="cm">/*[1]*/</span><span class="o">=</span><span class="n">userManager</span><span class="p">.</span><span class="na">decryptInputStream</span><span class="p">(</span><span class="n">String</span> <span class="n">encryptFilePath</span><span class="cm">/*[2]*/</span><span class="p">);</span>
</pre></div>


<p><code>[1]</code> <code>[inputStream]</code> is the input stream after the encrypted file is decrypted. You can take the stream to generate  file. If it is the encrypted image path, the stream can directly transfer to bitmap to load the image: </p>
<div class="codehilite"><pre><span></span><span class="n">InputStream</span> <span class="n">decryptInputStream</span><span class="o">=</span><span class="n">userManager</span><span class="p">.</span><span class="na">decryptInputStream</span><span class="p">(</span><span class="n">encryptFilePath</span><span class="p">);</span>
<span class="n">Bitmap</span> <span class="n">bitmap</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="p">.</span><span class="na">decodeStream</span><span class="p">(</span><span class="n">decryptInputStream</span><span class="p">);</span>
<span class="n">ImageView</span> <span class="n">imageView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">id</span><span class="p">.</span><span class="na">img</span><span class="p">);</span>
<span class="n">imageView</span><span class="p">.</span><span class="na">setImageBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">);</span>
</pre></div>


<p><code>[2]</code> <code>EncryptFilePath</code> is the path of the encrypted file，For example, the <code>path</code> property in the above <a>Face</a>  entity </p>
<h4 id="user-registration">User registration</h4>
<h6 id="when-a-user-registers-a-user-through-this-interface-in-order-to-maintain-data-consistency-the-user-data-state-flow-is-consistent-with-the-state-of-user-management-when-user-management-is-enabled-for-online-user-management-all-users-registered-through-this-interface-are-online-users-on-the-contrary-offline-users-are-entered-and-you-can-query-the-status-through-the-above-interface-of-get-user-management-status">When a user registers a user through this interface, in order to maintain data consistency, the user data state flow is consistent with the state of user management. When user management is enabled for online user management, all users registered through this interface are online users. On the contrary, offline users are entered, and you can query the status through the above interface of <code>Get User Management Status</code></h6>
<blockquote>
<p><code>java
userManager.registerUser(user /*[1]*/,UserListenrAbstract(){
@Override
  public void register(int code /*[2]*/, String msg/*[3]*/) {
  }
});</code></p>
<p><code>[1]</code> <code>user</code> Consistent with the above User content, the structure is as follows：</p>
<p><code>java
User user = new User.UserBuilder("Cruzr" /*Name*/, "/storage/emulated/0/Pictures/test2.png" /*The path of the picture*/) //Name and picture path are required 
  .gender(0)
  .title("title")
  .build();</code></p>
<p><code>[2]</code> <code>code：</code> </p>
<p><code>java
SUCCESS = 0; //The storage is successful or the user information is found
FAILED_CODE = -1; //Visual service disconnected
INSERT_FAILED_CODE = -2;  //Database storage failed
INSERT_VISUAL_FAILED_CODE = -3;  //Visual service feature value entry failed
INTERRUPT_FAILED_CODE = -4;   //Interrupted by next request</code></p>
<p><code>[3]</code> <code>msg:</code> When code is not equal to 0, msg means error information, when code=0, msg means success or json data of user information</p>
<p>Note: For more vision-related codes, please check the corresponding codes in the vision service</p>
</blockquote>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../android/guide/system-service/recharging.html" title="Recharging service" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Recharging service
              </span>
            </div>
          </a>
        
        
          <a href="visual.html" title="Visual service" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Visual service
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2020 Cruzr
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>